@prefix geolod:  <http://w3id.org/geo-lod/> .
@prefix sosa:    <http://www.w3.org/ns/sosa/> .
@prefix crm:     <http://www.cidoc-crm.org/cidoc-crm/> .
@prefix crmsci:  <http://www.ics.forth.gr/isl/CRMsci/> .
@prefix geo:     <http://www.opengis.net/ont/geosparql#> .
@prefix sf:      <http://www.opengis.net/ont/sf#> .
@prefix qudt:    <http://qudt.org/schema/qudt/> .
@prefix unit:    <http://qudt.org/vocab/unit/> .
@prefix prov:    <http://www.w3.org/ns/prov#> .
@prefix dct:     <http://purl.org/dc/terms/> .
@prefix owl:     <http://www.w3.org/2002/07/owl#> .
@prefix rdfs:    <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd:     <http://www.w3.org/2001/XMLSchema#> .

# ============================================================================
# ONTOLOGIE-HEADER
# ============================================================================

<http://w3id.org/geo-lod/sisal-extension>
    a owl:Ontology ;
    rdfs:label   "geo-lod SISAL Extension"@en ;
    rdfs:comment "Extends the geo-lod ice-core ontology with speleothem-specific
                  classes and properties, aligned with the SISALv3 database schema
                  (Kaushal et al. 2024, ESSD 16, 1933-1963)."@en ;
    owl:imports  <http://w3id.org/geo-lod/> ;
    dct:source   <https://doi.org/10.5194/essd-16-1933-2024> ;
    dct:created  "2024"^^xsd:gYear .

# ============================================================================
# KLASSEN
# ============================================================================

# ── Sample ────────────────────────────────────────────────────────────────────
geolod:Speleothem
    a owl:Class ;
    rdfs:subClassOf sosa:Sample ;
    rdfs:subClassOf crm:E22_Human-Made_Object ;
    rdfs:label   "Speleothem"@en ;
    rdfs:comment "Secondary cave carbonate precipitate (stalagmite, stalactite,
                  flowstone) used as palaeoclimate archive. Corresponds to
                  entity/persist_id in SISALv3."@en ;
    rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty     geolod:collectedFrom ;
        owl:someValuesFrom geolod:Cave
    ] .

# ── Site ──────────────────────────────────────────────────────────────────────
geolod:Cave
    a owl:Class ;
    rdfs:subClassOf crm:E53_Place ;
    rdfs:subClassOf crm:E27_Site ;
    rdfs:subClassOf geo:Feature ;
    rdfs:label   "Cave"@en ;
    rdfs:comment "Geographical cave site from which a speleothem was collected.
                  Corresponds to site in SISALv3 (site_id, latitude, longitude,
                  elevation)."@en .

# ── Sampling Event ────────────────────────────────────────────────────────────
geolod:SpeleothemSamplingEvent
    a owl:Class ;
    rdfs:subClassOf crm:E7_Activity ;
    rdfs:subClassOf crmsci:S1_Matter_Removal ;
    rdfs:label   "Speleothem Sampling Event"@en ;
    rdfs:comment "Scientific field event during which a speleothem was collected
                  from a cave."@en ;
    rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty     geolod:tookPlaceAt ;
        owl:someValuesFrom geolod:Cave
    ] ;
    rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty     geolod:removedSample ;
        owl:someValuesFrom geolod:Speleothem
    ] .

# ── Observation ───────────────────────────────────────────────────────────────
geolod:SpeleothemObservation
    a owl:Class ;
    rdfs:subClassOf sosa:Observation ;
    rdfs:subClassOf crmsci:S4_Observation ;
    rdfs:label   "Speleothem Observation"@en ;
    rdfs:comment "Single stable isotope measurement on a speleothem sample,
                  characterised by depth (mm), calendar age (ka BP) and measured
                  value. Corresponds to a row in the d18O or d13C table of
                  SISALv3."@en ;
    rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty     sosa:hasFeatureOfInterest ;
        owl:someValuesFrom geolod:Speleothem
    ] ;
    rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty     sosa:observedProperty ;
        owl:someValuesFrom geolod:ObservableProperty
    ] ;
    rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty     prov:wasDerivedFrom ;
        owl:someValuesFrom geolod:DataSource
    ] .

geolod:Delta18OSpeleothemObservation
    a owl:Class ;
    rdfs:subClassOf geolod:SpeleothemObservation ;
    rdfs:label   "delta-18O Speleothem Observation"@en ;
    rdfs:comment "Oxygen isotope ratio (delta-18O) in permille VPDB from a
                  speleothem. Proxy for hydroclimate, moisture source,
                  temperature."@en .

geolod:Delta13CSpeleothemObservation
    a owl:Class ;
    rdfs:subClassOf geolod:SpeleothemObservation ;
    rdfs:label   "delta-13C Speleothem Observation"@en ;
    rdfs:comment "Carbon isotope ratio (delta-13C) in permille VPDB from a
                  speleothem. Proxy for vegetation density, soil CO2, prior
                  calcite precipitation (Wong & Breecker 2015)."@en .

# ── Chronology ────────────────────────────────────────────────────────────────
geolod:UThChronology
    a owl:Class ;
    rdfs:subClassOf crmsci:S6_Data_Evaluation ;
    rdfs:label   "U-Th Chronology"@en ;
    rdfs:comment "Depth-age model for a speleothem based on uranium-thorium
                  (U-Th) radiometric dating. Corresponds to the Dating and
                  SISAL_chronology tables in SISALv3. Age-model ensembles
                  built with linear interpolation, Bchron, Bacon, copRa or
                  StalAge."@en ;
    rdfs:seeAlso <https://doi.org/10.5194/essd-16-1933-2024> .

# ── Observable Properties ─────────────────────────────────────────────────────
geolod:Delta13CProperty
    a owl:Class ;
    rdfs:subClassOf geolod:ObservableProperty ;
    rdfs:label   "delta-13C Isotope Ratio Property"@en ;
    rdfs:comment "Stable carbon isotope ratio (delta-13C) in permille VPDB.
                  Sensitive to vegetation dynamics, soil respiration, and prior
                  calcite precipitation."@en .

# ============================================================================
# OBJECT PROPERTIES
# ============================================================================

geolod:collectedFrom
    a owl:ObjectProperty ;
    rdfs:subPropertyOf sosa:isSampleOf ;
    rdfs:domain geolod:Speleothem ;
    rdfs:range  geolod:Cave ;
    rdfs:label  "collected from"@en ;
    rdfs:comment "Links a speleothem to the cave from which it was collected."@en .

geolod:ageChronologySpeleothem
    a owl:ObjectProperty ;
    rdfs:subPropertyOf geolod:ageChronology ;
    rdfs:domain geolod:SpeleothemObservation ;
    rdfs:range  geolod:UThChronology ;
    rdfs:label  "age chronology (speleothem)"@en ;
    rdfs:comment "U-Th chronology used to assign a calendar age to this
                  speleothem observation."@en .

# ============================================================================
# DATATYPE PROPERTIES
# ============================================================================

geolod:atDepth_mm
    a owl:DatatypeProperty ;
    rdfs:domain geolod:SpeleothemObservation ;
    rdfs:range  xsd:decimal ;
    rdfs:label  "at depth (mm)"@en ;
    rdfs:comment "Sampling depth in millimetres from top of speleothem.
                  Corresponds to depth_sample in SISALv3."@en ;
    qudt:unit   unit:MilliM .

geolod:entityId
    a owl:DatatypeProperty ;
    rdfs:domain geolod:Speleothem ;
    rdfs:range  xsd:integer ;
    rdfs:label  "SISAL entity ID"@en ;
    rdfs:comment "Unique dataset identifier in SISALv3 (entity_id). Multiple
                  entity_ids may share the same persist_id (same physical
                  speleothem, different time windows)."@en .

geolod:siteId
    a owl:DatatypeProperty ;
    rdfs:domain geolod:Cave ;
    rdfs:range  xsd:integer ;
    rdfs:label  "SISAL site ID"@en ;
    rdfs:comment "Unique site identifier in SISALv3 (site_id)."@en .

# ============================================================================
# INSTANZEN  –  MeasurementType & DataSource
# ============================================================================

geolod:MeasurementType_d13C
    a geolod:MeasurementType ;
    rdfs:label   "delta-13C Measurement"@en ;
    rdfs:comment "Stable carbon isotope ratio (delta-13C) in permille VPDB.
                  SISALv3 table: d13C. Proxy: vegetation, soil CO2, prior
                  calcite precipitation."@en .

geolod:SISALv3_DataSource
    a geolod:DataSource ;
    rdfs:label  "SISALv3 Database"@en ;
    rdfs:comment "Speleothem Isotopes Synthesis and AnaLysis database, version 3."@en ;
    dct:identifier
        "https://doi.org/10.5287/ora-2nanwp4rk"^^xsd:anyURI ;
    dct:bibliographicCitation
        "Kaushal, N. et al. (2024): SISALv3: a global speleothem stable isotope and trace element database. Earth Syst. Sci. Data, 16, 1933-1963. https://doi.org/10.5194/essd-16-1933-2024"@en ;
    prov:wasAttributedTo
        <https://doi.org/10.5194/essd-16-1933-2024> .
